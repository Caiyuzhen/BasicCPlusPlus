#include<iostream>
using namespace std;


/*
	âš¡ï¸æ‰¾åˆ°æ”¯ç‚¹æ•°æ®(å–ç¬¬ä¸€ä¸ªæˆ–è€…éšæœº), ã€ã€âš¡ï¸æ”¯ç‚¹å‰çš„æ•°æ®éƒ½æ¯”å®ƒå°, æ”¯ç‚¹åçš„æ•°æ®éƒ½æ¯”å®ƒå¤§ï¼âš¡ï¸ã€‘ã€‘
		è®¾å®šå¤´å°¾æŒ‡é’ˆï¼ˆğŸ‘€ä¸æ˜¯ C++ çš„æŒ‡é’ˆï¼‰ï¼, å…ˆåšä¸€æ¬¡äº¤æ¢, ç„¶åå¤´æŒ‡é’ˆå‘åé€’å½’åˆ¤æ–­æ˜¯å¦æ¯”æ”¯ç‚¹å€¼å¤§, ç›´åˆ°è·Ÿå°¾æŒ‡é’ˆç›¸é‡, ç„¶ååˆ¤æ–­ã€ç›¸é‡ç‚¹ã€‘æ˜¯å¦æ¯”æ”¯ç‚¹å€¼å¤§
		æ¯æ¬¡è¿›è¡Œåˆ†åŒº, å½“æ— æ³•åˆ†åŒºæ—¶, åˆ™å®Œæˆæ’åº
*/


// ğŸ‘‹ äº¤äº’æ•°ç»„ä¸­ä¸¤ä¸ªå…ƒç´ çš„æ–¹æ³•
void swap(int (&arr)[10], int x, int y) {
	int temp = arr[x];
	arr[x] = arr[y];
	arr[y] = temp;
}



// âœˆï¸ å•ç‹¬æ‹†åˆ†å‡ºæ¥çš„åˆ†åŒºå‡½æ•° => éœ€è¦è¿”å›åˆ†åŒºæ”¯ç‚¹æœ€ç»ˆçš„ä¸‹æ ‡ç´¢å¼•ä¿¡æ¯ï¼ä»¥ä¾¿çŸ¥é“ä»æ•°ç»„çš„å“ªé‡Œå¼€å§‹åˆ†å‰²
int partition(int (&arr)[10], int start, int end) {
	// 1.é€‰åŒºæ”¯ç‚¹
	int pivot = arr[start];

	// 2.æŒ‡å®šæŒ‡å‘æ•°ç»„å¤´å°¾ä¸¤ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼ˆğŸ‘€ä¸æ˜¯ C++ çš„æŒ‡é’ˆï¼‰ï¼
	int left = start, right = end;

	// 3. å¤´å°¾å„è‡ªå‘ä¸­å¤®ç§»åŠ¨ ï¼ˆğŸš€å¦‚æœæ˜¯å·¦æ’åˆ°å³è¾¹, è¯´æ˜ä¹‹å‰çš„å€¼éƒ½æ¯”æ”¯ç‚¹å°; å¦‚æœæ˜¯å³æ’åˆ°å·¦è¾¹, è¯´æ˜å½“å‰æ’åˆ°çš„å€¼æ¯”æ”¯ç‚¹å¤§ï¼‰
	while(left < right) {
		// ğŸ”¥ğŸ”¥ï¼ˆå·¦æŒ‡é’ˆä¸æ–­å‘å³ç§», ç›´åˆ°æ‰¾åˆ°æ¯”æ”¯ç‚¹å¤§çš„å€¼ï¼‰å·¦æŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ ã€ğŸ‘€æ¯”æ”¯ç‚¹å¤§ã€‘æ—¶, æ‰è·Ÿå³è¾¹æ”¯ç‚¹å…ƒç´ äº’æ¢, å¦‚æœæ¯”æ”¯ç‚¹å€¼å°, å°±ä¸€ç›´å‘å³ç§»(å°äºå³æŒ‡é’ˆæ—¶) , ç›´åˆ°æ’åˆ°å³æŒ‡é’ˆ=> å› ä¸ºè¦ä¸åœçš„æ¢, æ‰€ä»¥ç”¨ while å¾ªç¯
		while(arr[left] <= pivot && left < right) { 
			++left; // å¢åŠ å·¦æŒ‡é’ˆçš„ç´¢å¼•ä½
		}

		// ğŸ”¥ğŸ”¥ ï¼ˆå³æŒ‡é’ˆä¸æ–­å‘å·¦ç§», ç›´åˆ°æ‰¾æ¯”æ”¯ç‚¹å°çš„å€¼ï¼‰å³æŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ ã€ğŸ‘€æ¯”æ”¯ç‚¹å°ã€‘æ—¶, 
		while(arr[right] <= pivot && left < right) {
			--right; // å‡å°‘å³æŒ‡é’ˆçš„ç´¢å¼•ä½
		}

		// ğŸ‘‹ğŸ‘‹ æŒ‡é’ˆçš„å·¦å³äº’æ¢(å°è£…å¥½æ–¹æ³•äº†)
		swap(arr, left, right);
	}

	// 4. åˆ¤æ–­æŒ‡é’ˆç›¸é‡ä½ç½®æ¯”æ”¯ç‚¹å¤§è¿˜æ˜¯å°ï¼ˆğŸš€å¦‚æœæ˜¯å·¦æ’åˆ°å³è¾¹, è¯´æ˜ä¹‹å‰çš„å€¼éƒ½æ¯”æ”¯ç‚¹å°; å¦‚æœæ˜¯å³æ’åˆ°å·¦è¾¹, è¯´æ˜å½“å‰æ’åˆ°çš„å€¼æ¯”æ”¯ç‚¹å¤§ï¼‰
	// ç›¸é‡æ—¶ left = right
	if(arr[left] <= pivot) { // æ¯”æ”¯ç‚¹å°æˆ–è€…ç­‰äºæ”¯ç‚¹, å°±æ¢åˆ°å¤´ä½ç½®
		swap(arr, start, left); //arr[start] å°±æ˜¯ pivot
		return left; // ğŸš€ğŸš€ğŸš€ è¿”å›æ”¯ç‚¹ pivot æœ€ç»ˆéœ€è¦å»åˆ°çš„ä½ç½®
	} 
	else if(arr[left] > pivot) {  // æ¯”æ”¯ç‚¹å¤§, å°±æŠŠ left å‰ä¸€ä¸ªä½ç½®çš„å…ƒç´ æ¢åˆ°æ•°ç»„çš„å¤´ä½ç½®
		swap(arr, start, left - 1);
		return left - 1;
	}

}




// ğŸ”¥ å› ä¸ºæœ€ç»ˆè¦æ”¹å˜æ•°ç»„, æ‰€ä»¥ä¸èƒ½æ˜¯ const !
void quickSortFn(int (&arr)[10], int start, int end) { // ä¼ å…¥æ•°ç»„çš„å¼•ç”¨, è¡Œå‚å a, start, end ä¸ºå¤´å°¾çš„æŒ‡é’ˆ
	//æœ¬è´¨è¿˜æ˜¯é€’å½’, å®šä¹‰åœæ­¢é€’å½’çš„åŸºå‡†æƒ…å†µ
	if(start >= end) { //é‡åˆ, åªå‰©ä¸€ä¸ªå…ƒç´ 
		return;
	}

	// é€‰åŒºæ”¯ç‚¹è¿›è¡Œåˆ†åŒº(åˆ†åŒºå•ç‹¬åŒ…è£…æˆä¸€ä¸ªå‡½æ•°) => å¯ä»¥å¾—åˆ°ã€âš¡ï¸åˆ†åŒºæ”¯ç‚¹æœ€ç»ˆç§»åŠ¨åˆ°çš„ç‚¹ã€‘ä¸€ä¸ªä¸‹æ ‡ç´¢å¼•
	int mid = partition(arr, start, end);
	
	//é€’å½’è°ƒç”¨, ç»§ç»­æ’åº
	quickSortFn(arr, start, mid - 1); // ç»ˆç‚¹å‘å·¦ç§»åŠ¨ä¸€ä½
	quickSortFn(arr, mid + 1, end); // èµ·å§‹ç‚¹å‘å³ç§»åŠ¨ä¸€ä½
}



// ğŸ‘€ æœ€ç»ˆæ‰“å°æ•°ç»„çš„æ–¹æ³•
void printArray(const int(&arr)[10]) {
	for(int res: arr) {
		cout << res <<  "\t";
	}
	cout << endl;
}



int main() {
	int arr[10] = { 23, 45, 18, 6, 11, 19, 22, 18, 12, 9 };
	int size = sizeof(arr) / sizeof(arr[0]); // å¾—åˆ°æ•°ç»„çš„æ€»é•¿åº¦

	// è¿›è¡Œæ’åº
	quickSortFn(arr, 0, size - 1); // size - 1 ä¸ºç»“æŸä½ç½®çš„æŒ‡é’ˆ

	// æ‰“å°æ’å¥½åºçš„æ•°ç»„
	printArray(arr);

	cin.get();
}